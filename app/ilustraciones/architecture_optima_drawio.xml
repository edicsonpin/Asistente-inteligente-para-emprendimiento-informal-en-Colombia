<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36" version="29.0.2">
  <diagram id="architecture-optima-v4" name="Arquitectura Optima MLOps - TFM">
    <mxGraphModel dx="934" dy="511" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="presentation_group" value="Capa de Presentación (Frontend)" style="group;strokeColor=#2B7CE9;fillColor=#E8F0FE;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="40" y="20" width="990" height="120" as="geometry" />
        </mxCell>
        <mxCell id="microservices_group" value="Capa de Microservicios (Backend)" style="group;strokeColor=#27ae60;fillColor=#e8fdf0;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="70" y="290" width="950" height="280" as="geometry" />
        </mxCell>
        <mxCell id="persistence_group" value="Capa de Persistencia (Polyglot Persistence)" style="group;strokeColor=#b86127;fillColor=#fff3e6;fontSize=14;fontStyle=1;align=center;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="40" y="700" width="1110" height="150" as="geometry" />
        </mxCell>
        <mxCell id="web_app" value="App Web (Vue / Angular)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#d79b2a;" parent="1" vertex="1">
          <mxGeometry x="60" y="80" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mobile_app" value="App Móvil (React Native)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#d79b2a;" parent="1" vertex="1">
          <mxGeometry x="380" y="50" width="160" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="audit_panel" value="Panel de MLOps/Auditoría (XAI)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#d79b2a;" parent="1" vertex="1">
          <mxGeometry x="630" y="50" width="280" height="46.25" as="geometry" />
        </mxCell>
        <mxCell id="api_gateway" value="API Gateway (KONG/Envoy)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5e6ff;strokeColor=#b36bff;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="150" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="service_mesh" value="Service Mesh (Istio/Linkerd) - Control de Tráfico/Seguridad" style="rounded=0;dashed=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#9ea7b8;" parent="1" vertex="1">
          <mxGeometry x="370" y="230" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="auth_service" value="1. Auth Service (Identity/Roles)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#3a87c8;" parent="1" vertex="1">
          <mxGeometry x="90" y="325" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="profile_service" value="2. Profile Service (Emprendedor/Negocio)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#3a87c8;" parent="1" vertex="1">
          <mxGeometry x="270" y="325" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="opportunity_service" value="3. Opportunity Service (Programas/Riesgo)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#3a87c8;" parent="1" vertex="1">
          <mxGeometry x="500" y="325" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="recommendation_service" value="4. Recommendation Service (Hybrid Model/Scoring)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff0f0;strokeColor=#c84d4d;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="710" y="325" width="240" height="45" as="geometry" />
        </mxCell>
        <mxCell id="xai_service" value="5. XAI Service (Explicabilidad LIME/SHAP/Contrafactuales)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff0f7;strokeColor=#c85aa6;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="400" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mlops_service" value="6. MLOps Service (Pipelines/Drift/Generación Sintética)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f6fff0;strokeColor=#67b35a;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="460" y="450" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="analytics_service" value="7. Analytics Service (Event Tracking/KPIs)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fffaf0;strokeColor=#d79b2a;" parent="1" vertex="1">
          <mxGeometry x="780" y="460" width="230" height="70" as="geometry" />
        </mxCell>
        <mxCell id="kafka" value="Kafka (Bus de Eventos - Trazabilidad Asíncrona)" style="cylinder;whiteSpace=wrap;html=1;fillColor=#efe6ff;strokeColor=#a96bff;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="450" y="600" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="postgres" value="PostgreSQL (Datos Core/Transaccionales)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#e6fff2;strokeColor=#27ae60;" parent="1" vertex="1">
          <mxGeometry x="60" y="740" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="timeseries" value="TimescaleDB/InfluxDB (Métricas/Monitoreo/Logs)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#e6fbff;strokeColor=#17a2b8;" parent="1" vertex="1">
          <mxGeometry x="230" y="740" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="feature_store" value="Redis/Milvus (Feature Store - Embeddings/Low Latency)" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#fff0f0;strokeColor=#c84d4d;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="750" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mlflow_registry" value="MLflow Registry (Metadata/Versiones)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#fff0f6;strokeColor=#c85aa6;" parent="1" vertex="1">
          <mxGeometry x="650" y="750" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="minio" value="MinIO / S3 (Artefactos/Datasets Sintéticos)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#fff8e6;strokeColor=#d79b2a;" parent="1" vertex="1">
          <mxGeometry x="930" y="740" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="e_web_to_gateway" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3a3a3a;" parent="1" source="web_app" target="api_gateway" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_mobile_to_gateway" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3a3a3a;" parent="1" source="mobile_app" target="api_gateway" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_audit_to_gateway" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3a3a3a;" parent="1" source="audit_panel" target="api_gateway" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_gateway_auth" value="REST/gRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2b7ce9;" parent="1" source="api_gateway" target="auth_service" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="450" y="290" />
              <mxPoint x="180" y="290" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_gateway_profile" value="REST/gRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2b7ce9;" parent="1" source="api_gateway" target="profile_service" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="550" y="290" />
              <mxPoint x="400" y="290" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_gateway_opportunity" value="REST/gRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2b7ce9;" parent="1" source="api_gateway" target="opportunity_service" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_gateway_recommendation" value="Síncrono (Predicción)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#c84d4d;" parent="1" source="api_gateway" target="recommendation_service" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="650" y="290" />
              <mxPoint x="910" y="290" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_gateway_xai" value="Síncrono/Asíncrono" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#c85aa6;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="536" y="240" />
              <mxPoint x="266" y="240" />
            </Array>
            <mxPoint x="536" y="210" as="sourcePoint" />
            <mxPoint x="266" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_recommendation_kafka" value="Eventos: RECOMENDACION_GENERADA" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" parent="1" source="recommendation_service" target="kafka" edge="1">
          <mxGeometry x="-0.4222" y="30" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="380" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_xai_kafka" value="Eventos: FEEDBACK_XAI" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" parent="1" source="xai_service" target="kafka" edge="1">
          <mxGeometry x="-0.0222" y="25" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_mlops_kafka" value="Eventos: DRIFT_DETECTADO" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" parent="1" source="mlops_service" target="kafka" edge="1">
          <mxGeometry x="0.3851" y="-10" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_analytics_kafka" value="Consume: Todos los eventos" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" parent="1" source="kafka" target="analytics_service" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="670" y="635" />
              <mxPoint x="670" y="550" />
              <mxPoint x="915" y="550" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_kafka_postgres" value="Almacena Interacciones/Logs" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#222222;" parent="1" source="kafka" target="postgres" edge="1">
          <mxGeometry x="0.2779" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="450" y="730" />
              <mxPoint x="160" y="730" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_kafka_timeseries" value="Almacena Métricas de Rendimiento" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#222222;" parent="1" source="kafka" target="timeseries" edge="1">
          <mxGeometry x="0.1202" y="-10" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="700" />
              <mxPoint x="380" y="700" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_mlops_mlflow" value="Registro/Consulta Modelos" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6b2a6f;" parent="1" edge="1">
          <mxGeometry x="-0.111" relative="1" as="geometry">
            <mxPoint x="622" y="519" as="sourcePoint" />
            <mxPoint x="752" y="749" as="targetPoint" />
            <Array as="points">
              <mxPoint x="622" y="649" />
              <mxPoint x="752" y="649" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_mlops_minio" value="Almacena Datasets/Artefactos" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6b2a6f;" parent="1" source="mlops_service" target="minio" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="770" y="500" />
              <mxPoint x="770" y="710" />
              <mxPoint x="1060" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_xai_mlflow" value="Consulta Metadatos de Modelo" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#c85aa6;exitX=0.363;exitY=0.954;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="xai_service" edge="1">
          <mxGeometry x="0.1689" y="5" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="255" y="533" />
              <mxPoint x="416" y="533" />
              <mxPoint x="416" y="743" />
              <mxPoint x="846" y="743" />
              <mxPoint x="846" y="818" />
            </Array>
            <mxPoint x="256" y="483" as="sourcePoint" />
            <mxPoint x="806" y="818" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_recommendation_featurestore" value="LECTURA (Embeddings/Features)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#c84d4d;fontStyle=1;endArrow=block;" parent="1" edge="1">
          <mxGeometry x="0.063" y="30" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="924" y="704" />
              <mxPoint x="634" y="704" />
            </Array>
            <mxPoint x="924" y="364" as="sourcePoint" />
            <mxPoint x="624" y="779" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_mlops_featurestore" value="ESCRITURA (Features precalculadas)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#67b35a;fontStyle=1;endArrow=block;" parent="1" source="mlops_service" target="feature_store" edge="1">
          <mxGeometry x="0.2616" y="-55" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e_auth_postgres" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#3a87c8;" parent="1" source="auth_service" target="postgres" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_profile_postgres" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#3a87c8;" parent="1" source="profile_service" target="postgres" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="400" y="570" />
              <mxPoint x="400" y="710" />
              <mxPoint x="160" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_opportunity_postgres" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#3a87c8;" parent="1" source="opportunity_service" target="postgres" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="650" y="720" />
              <mxPoint x="160" y="720" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_analytics_timeseries" value="Query Métricas" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d79b2a;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="915" y="730" />
              <mxPoint x="380" y="730" />
            </Array>
            <mxPoint x="915.0285714285715" y="540" as="sourcePoint" />
            <mxPoint x="380" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
