<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-11-18T00:00:00.000Z" agent="5.0 (compatible)" etag="1" version="20.1.4" type="device">
  <diagram id="architecture-optima" name="Arquitectura Optima">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Presentation Layer Group -->
        <mxCell id="presentation_group" value="Capa de Presentación" style="group;strokeColor=#2B7CE9;fillColor=#E8F0FE;fontSize=14;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="1060" height="120" as="geometry"/>
        </mxCell>

        <!-- Presentation nodes -->
        <mxCell id="web_app" value="App Web\n(Vue / Angular)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#d79b2a;" vertex="1" parent="presentation_group">
          <mxGeometry x="60" y="40" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="mobile_app" value="App Móvil\n(React Native)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#d79b2a;" vertex="1" parent="presentation_group">
          <mxGeometry x="320" y="40" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="audit_panel" value="Panel de Auditoría\n(Dashboard)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#d79b2a;" vertex="1" parent="presentation_group">
          <mxGeometry x="580" y="40" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="api_gateway" value="API Gateway\n(KONG)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5e6ff;strokeColor=#b36bff;" vertex="1" parent="1">
          <mxGeometry x="420" y="160" width="220" height="60" as="geometry"/>
        </mxCell>

        <!-- Service Mesh (optional) -->
        <mxCell id="service_mesh" value="Service Mesh\n(Istio/Linkerd) - opcional" style="rounded=0;dashed=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#9ea7b8;" vertex="1" parent="1">
          <mxGeometry x="350" y="235" width="360" height="40" as="geometry"/>
        </mxCell>

        <!-- Microservices Layer Group -->
        <mxCell id="microservices_group" value="Capa de Microservicios" style="group;strokeColor=#27ae60;fillColor=#e8fdf0;fontSize=14;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="40" y="290" width="1060" height="360" as="geometry"/>
        </mxCell>

        <!-- Microservice boxes -->
        <mxCell id="auth_service" value="Auth Service\n(JWT, Roles, OPA)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#3a87c8;" vertex="1" parent="microservices_group">
          <mxGeometry x="70" y="320" width="200" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="profile_service" value="Profile Service\n(Emprendedor, Negocio)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#3a87c8;" vertex="1" parent="microservices_group">
          <mxGeometry x="300" y="320" width="200" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="opportunity_service" value="Opportunity Service\n(Oportunidades, Aplicaciones)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#3a87c8;" vertex="1" parent="microservices_group">
          <mxGeometry x="530" y="320" width="200" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="recommendation_service" value="Recommendation Service\n(LightGBM + NN)\nClasificación & Scoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff0f0;strokeColor=#c84d4d;" vertex="1" parent="microservices_group">
          <mxGeometry x="760" y="320" width="220" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="xai_service" value="XAI Service\n(SHAP / LIME / Contrafactuales)\nMetricas Equidad" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff0f7;strokeColor=#c85aa6;" vertex="1" parent="microservices_group">
          <mxGeometry x="170" y="440" width="260" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="mlops_service" value="MLOps Service\n(MLflow, Pipelines, Drift)\nGeneración Sintética (CTGAN)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f6fff0;strokeColor=#67b35a;" vertex="1" parent="microservices_group">
          <mxGeometry x="460" y="440" width="260" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="analytics_service" value="Analytics Service\n(Event Tracking, KPIs)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fffaf0;strokeColor=#d79b2a;" vertex="1" parent="microservices_group">
          <mxGeometry x="760" y="440" width="220" height="90" as="geometry"/>
        </mxCell>

        <!-- Kafka (Message Broker) -->
        <mxCell id="kafka" value="Kafka\n(Message Broker / Event Streaming)" style="cylinder;whiteSpace=wrap;html=1;fillColor=#efe6ff;strokeColor=#a96bff;" vertex="1" parent="1">
          <mxGeometry x="480" y="660" width="200" height="60" as="geometry"/>
        </mxCell>

        <!-- Persistence Layer Group -->
        <mxCell id="persistence_group" value="Capa de Persistencia" style="group;strokeColor=#b86127;fillColor=#fff3e6;fontSize=14;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="40" y="750" width="1060" height="200" as="geometry"/>
        </mxCell>

        <!-- Databases -->
        <mxCell id="postgres" value="PostgreSQL\n(Datos transaccionales)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e6fff2;strokeColor=#27ae60;" vertex="1" parent="persistence_group">
          <mxGeometry x="160" y="780" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="timeseries" value="Time-Series DB\n(InfluxDB / TimescaleDB)\nMétricas & Monitoreo" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e6fbff;strokeColor=#17a2b8;" vertex="1" parent="persistence_group">
          <mxGeometry x="450" y="780" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="mlflow_registry" value="MLflow Model Registry\n(Modelos & Experiment Tracking)" style="cylinder;whiteSpace=wrap;html=1;fillColor=#fff0f6;strokeColor=#c85aa6;" vertex="1" parent="persistence_group">
          <mxGeometry x="740" y="780" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="minio" value="MinIO / S3\n(Artefactos, Datasets Sintéticos)" style="cylinder;whiteSpace=wrap;html=1;fillColor=#fff8e6;strokeColor=#d79b2a;" vertex="1" parent="persistence_group">
          <mxGeometry x="1020" y="780" width="220" height="70" as="geometry"/>
        </mxCell>

        <!-- Connectors: Presentation -> API Gateway -->
        <mxCell id="e_web_to_gateway" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3a3a3a;" edge="1" parent="1" source="web_app" target="api_gateway">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_mobile_to_gateway" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3a3a3a;" edge="1" parent="1" source="mobile_app" target="api_gateway">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_audit_to_gateway" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3a3a3a;" edge="1" parent="1" source="audit_panel" target="api_gateway">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Gateway -> Microservices -->
        <mxCell id="e_gateway_auth" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2b7ce9;" edge="1" parent="1" source="api_gateway" target="auth_service">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_gateway_profile" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2b7ce9;" edge="1" parent="1" source="api_gateway" target="profile_service">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_gateway_opportunity" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2b7ce9;" edge="1" parent="1" source="api_gateway" target="opportunity_service">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_gateway_recommendation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2b7ce9;" edge="1" parent="1" source="api_gateway" target="recommendation_service">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Microservices -> Kafka -->
        <mxCell id="e_recommendation_kafka" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" edge="1" parent="1" source="recommendation_service" target="kafka">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_xai_kafka" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" edge="1" parent="1" source="xai_service" target="kafka">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_mlops_kafka" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" edge="1" parent="1" source="mlops_service" target="kafka">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_analytics_kafka" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#7a4cff;" edge="1" parent="1" source="analytics_service" target="kafka">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Kafka -> Persistence -->
        <mxCell id="e_kafka_postgres" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#222222;" edge="1" parent="1" source="kafka" target="postgres">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_kafka_timeseries" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#222222;" edge="1" parent="1" source="kafka" target="timeseries">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- MLOps -> MLflow Registry & MinIO -->
        <mxCell id="e_mlops_mlflow" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6b2a6f;" edge="1" parent="1" source="mlops_service" target="mlflow_registry">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_mlops_minio" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6b2a6f;" edge="1" parent="1" source="mlops_service" target="minio">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- XAI -> MLflow (to fetch model metadata) -->
        <mxCell id="e_xai_mlflow" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#c85aa6;" edge="1" parent="1" source="xai_service" target="mlflow_registry">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Analytics -> Timeseries -->
        <mxCell id="e_analytics_timeseries" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d79b2a;" edge="1" parent="1" source="analytics_service" target="timeseries">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Auth & Profile -> Postgres -->
        <mxCell id="e_auth_postgres" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#3a87c8;" edge="1" parent="1" source="auth_service" target="postgres">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_profile_postgres" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#3a87c8;" edge="1" parent="1" source="profile_service" target="postgres">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
